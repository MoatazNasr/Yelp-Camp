<% layout('layout/boilerplate') %>


    <div id="cluster-map" ></div>

    <h1 class="text-center mb-3">All Campgrounds</h1>

    <% for (let i of campgrounds){ %>
        <div class="card text-center mb-4" >

            <section class="row">
                <div class="col-md-4">
            
                    <% if (i.images.length) { %>
                        <img class="img-fluid" src="<%=i.images[0].url%>">  
                    <% } else { %>

                        <img class="img-fluid" src="https://images.unsplash.com/photo-1493243948585-fe4fd486404a?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=750&q=80%>">
                    <% }  %>
                     
                   

                </div>

                <div class="col-md-8">
                    <div class="card-body">
                        <div class="card-title">
                            <h5>
                                <%= i.title %>
                            </h5>
                            <p class="card-text">
                                <%=i.description %>
                            </p>
                            <p class="card-text">
                                <span class="text-muted">
                                    <%=i.location %>
                                </span>
                            </p>
                        </div>
                        <a class=" btn btn-primary" href="/campground/<%=i.id%> ">Show Campground </a>
                    </div>
                </div>
            </section>
        </div>
        <% } %>


        <script>
        const  mapToken = '<%-process.env.MAPBOX_TOKEN%>';
        const campgrounds = {features : <%-JSON.stringify(campgrounds)%>}
        // did that because the data field in earthquakres works on features data so we 
        // make an object called features to be the same as earthquakes data
        </script>
        <script src="/javascripts/clusterMap.js"></script>